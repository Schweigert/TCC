\documentclass[11pt]{article}

%\usepackage{luatextra}
%\defaultfontfeatures{Ligatures=TeX}
%\usepackage{fontspec}


\usepackage[portuges]{babel}
%\usepackage{fontspec}
%\usepackage[T1]{fontenc}
%\usepackage[latin1]{inputenc}
%\usepackage[utf8]{inputenc}

\usepackage{microtype}

% GRAPH STUFF
%\usepackage{tikz}
%\usetikzlibrary{graphdrawing}
%\usetikzlibrary{graphs}
%\usetikzlibrary{shapes}
%\usetikzlibrary{snakes}
%\usegdlibrary{trees}
% END OF GRAPH STUFF

%\usepackage[alf]{abntcite}

\usepackage{setspace}
\usepackage{amsmath}
\usepackage{epsfig}
\usepackage[pdftex]{hyperref}
\usepackage{multirow}
\usepackage{fancyhdr}

%\usepackage{bibtex}

%\oddsidemargin -0.7cm
%\evensidemargin -0.7cm
\topmargin -2.0cm
%\headheight 0  cm
\headsep 1.5cm
%\hoffset -1.0cm
%\footskip 40pt
%\textheight = 235mm \textwidth 185mm
\oddsidemargin 0.4cm
\evensidemargin 0.4cm
\textheight = 235mm \textwidth 165mm


\pagestyle{plain}

\usepackage{multicol}
\addtolength\columnsep{2pt}

%\newcommand{\apud}[4]{\citeauthor{#1} \mkbibparens{\citeyear{#1},\space{#2} apud \cite{#3},\space{#4}}}

\begin{document}

\pagestyle{fancy}
%\lhead{\includegraphics[width=0.3\columnwidth]{figuras/logo_dcc.png}}
\lhead{
  \includegraphics[scale=0.75]{figuras/logo_dcc.pdf}
}
\chead{
  \scriptsize{
    UNIVERSIDADE DO ESTADO DE SANTA CATARINA -- UDESC\\
    CENTRO DE CIÊNCIAS TECNOLÓGICAS -- CCT\\
    DEPARTAMENTO DE CIÊNCIA DA COMPUTAÇÃO -- DCC
  }
}
%\rhead{\includegraphics[width=0.3\columnwidth]{figuras/logo_udescjlle.png}}
\rhead{
  \includegraphics[scale=0.75]{figuras/logo_udescjlle.pdf}
}

\title{
Plano de Trabalho de Conclusão de Curso\\
Proposta de um algoritmo hibrido para solução do Problema de Escalonamento de Tripulação (CSP)
}

\author{
Renan Samuel da Silva -- \texttt{renan.samuel.da.silva@gmail.com}\\
Omir Alves -- \texttt{omir.alves@udesc.br} {\it (orientador)}\\
%$<$Nome do Coorientador -- \texttt{email@coorientador} {\it (coorientador)}$>$ (se for o caso)\\
~\\
Turma 2016/2 -- Joinville/SC
}

\date{02 de Julho de 2016}

\maketitle


%\singlespacing  %espaçamento simples
\onehalfspacing  %espaçamento de 1,5
%\doublespacing  %espaçamento duplo


\begin{abstract}
    Grande parte dos problemas encontrados na prática são difíceis de serem
    resolvidos e possuem um grande número de variáveis (na ordem dos milhares
    ou milhões), fazendo com que seja impossivel resolver ótimamente em uma
    escala de tempo plausível. Sendo assim, torna-se necessário o emprego de
    algoritmos cada vez mais complexos e que unem soluções exatas e heuristícas.
    O objetivo desde trabalho é pesquisar, identificar e especificar um método
    para resolver o problema de agendamento de tripulação (\textit{crew scheduling}).\\
\textbf{Palavras-chave:} \textit{Programação linear inteira, otimização combinatoria, cobertura de conjunto, agendamento de tripulação, Geração de Colunas}
\end{abstract}

%------------------------------------------------
\section{Introdução e Justificativa}
\label{sec:int}

Cada vez mais as empresas buscam otimizar suas atividades, de modo a reduzir o custo e maximizar o lucro final.
As empresas do segmento de transporte urbano de ônibus deparam-se com o desafio que precisam ser abordados
a fim de viabilizar o negócio, dentre as quais pode-se citar: quais veículos da frota devem ser renovados;
quando realizar manutenção preventiva na frota; quais horários do serviço de ônibus devem ser disponibilizados;
identificar as rodas do serviço de transporte; como alocar os funcionários; como tratar imprevistos
temporais e climáticos, dentre outras. Estes questionamentos podem ser resolvidos e otimizadas através da utilização de recursos
de pesquisa operacional.

Especificamente o problema de alocação de funcionários ou tripulação, em inglês \textit{crew scheduling problem} (CSP),
consiste em escolher quais funcionários deve realizar quais funções durante um dado período de tempo \cite{Bergh}. O processo
de escolha está sujeito à diversas restrições. Existem restrições devido a regras definidas pela empresa, leis trabalhistas e sindicais,
e até mesmo preferencias pessoas dos motoristas. Dado o conjunto de restrições, deve-se encontrar as designações que reduzem
ao máximo o custo da operação. O CSP assume que já tenha sido determinado as rotas ondem a tripulação irá trabalhar, assim como quais veículos
serão utilizados, quais os horários de partida e chegada e os pontos de troca.

A definição de muitos termos relacionados à problematica do CSP faz-se necessária e são apresentadas a segui: uma \textbf{viagem} consiste
no deslocamento entre dois pontos pré-determinados com horários de partida e chega já determinados. Uma \textbf{jornada}
consiste na sequencia de viagens realizadas por uma dada tripulação durante o seu turno de trabalho. Conhecendo todas as possíveis
jornadas válidas sobre o conjunto de regras pré-estabelicidos, a solução do CSP consiste em escolher quais jornadas cobrem todas
as viagems que devem ser realizadas~\cite{Bergh}. Ou seja, dado o conjunto de jornadas válidas, escolhe-se um subconjunto que cubra todas
as viagems pelo menos uma vez, minimizando assim o custo final.

O problema do CSP é referenciado na literatura como sendo o problema de \textbf{cobertura de conjuntos}, ou \textit{set covering problem} (SCP)~\cite{nemhauser1988integer}.
Onde dado um conjunto de linhas a serem cobertas, e um conjunto de colunas com custos
associados que cobrem as linhas, escolhe-se o subconjunto de colunas que cubra todas as linhas minimizando o custo final. Como o SCP
define que cada linha deve ser coberta pelo menos uma vez, isso implica que se o CSP for modelado como uma instância de SCP, pode ocorrer
de mais de um tripulante ser designado para a mesma viagem. Isso ná pratica consiste de um motorista ir de carona até o início de outra viagem,
por exemplo.

Outra forma de modelar-se o CSP consiste em determinar que exatamente uma tripulação deve ser associado a uma viagem. Esta restrição
transforma o problema de SCP em um problema de \textbf{particionamento de conjuntos}, \textit{set partitioning problem} (SPP)~\cite{garfinkel1969set}.
A principal diferença entre o SCP e o SPP consiste a impossibilidade de te-ser uma mesma linha coberta por mais de uma coluna.
No contexto do CSP, isto implica em não ter uma tarefa sendo coberta por mais de uma jornada. Devido a restrição de não
sobreposição, um CSP modelado como um SPP pode ser significativamente mais complexo de resolver, porém, mais interessante do
ponto de vista prático, já que diminui a ociosidade dos tripulantes. Sabe-se que tanto o SPP quanto o SCP são problemas
NP-Hard~\cite{karp1972}. Note que toda solução do SPP é uma solução para o SCP, porém o reciproco não é verdadeiro.

Um dos primeiros algoritmos propostos para o SCP consiste em uma heuristíca gulosa proposta por~\cite{chvatal1979greedy}.
A cada passo o algoritmo escolhe a coluna que cobre o maior número possível de linhas. O algoritmo
é na prática rápido, porém tende a não gerar soluções tão boas quanto outros algoritmos modernos.~\cite{balas1980set} propos
um algoritmo baseado em \textit{branch and bound} e que utiliza heuristícas duais. Este algoritmo (com o poder computacional
disponível na data da publicação do artigo) foi capaz de resolver instâncias de dimensões até 200 $\times$ 2000.~\cite{beasley1987algorithm}
melhorou o algoritmo proposto por Balas e Ho, utilizando relaxações lagrangeanas e remoção de linhas e colunas. Este algoritmo, segundo
o autor, chegou a marca de problemas de dimensões $400 \times 4000$.~\cite{fisher1990optimal} utilizou \textit{branch and bound} com
diversas heuristícas duais para assim encontrar o limite superior de otimalidade do problema. Trabalhos como~\cite{de2011algoritmo}
e~\cite{dos2008metodo} utilizam soluções híbridas para a solução do problema.~\cite{ceria1997},~\cite{caprara2000algorithms},
~\cite{ernst2004staff} e~\cite{van2013personnel} apresentam um estudo mais detalhado sobre os algoritmos utilizados para resolver o SCP, SPP e CSP.

Conhecendo-se todas as possíveis jornadas de uma instância de CSP, pode-se modela-lo utilizando programação linear inteira (PLI). A modelagem utilizando-se
o SPP e o SCP é apresentada em~\eqref{spp} e~\eqref{scp}, respectivamente. O conjunto de todas as jornadas possíveis está condificado
na matrix $A$. O vetor $J$ corresponde a todas as jornadas, e o vetor $T$ a todas as tarefas. A variável $a_{tj}$ é $1$ se a tarefa
$t$ é coberta pela jornada $j$ e $0$ caso contrário. A restrição~\eqref{spp2} garante que cada tarefa $t \in T$ é coberta exatamente
uma única vez pelas jornadas selecionadas.

A restrição~\eqref{scp2} funciona de modo análogo, porém, a restrição deixa de ser uma igualdade
e passa a ser uma desigualdade, fazendo com que cada tarefa seja coberta pelo menos uma vez. O vetor $X$ determina que jornadas
seram utilizadas. Se $x_j = 1$, então a $j-$ésima é utilizada, caso contrário $x_j = 0$. As restrições~\eqref{spp3} e~\eqref{scp3}
garantem que a varável de decisão $x$ possuirá um valor válido.

Dado o problema em questão, o tamanho da matriz é tipicamente grande, e para casos práticos
é muitas vezes inviável de tratá-la. O número de jornadas possíveis cresce exponencialmente, de modo que a enumeração de todas as
jornadas possíveis não é viavel.
%\apud{barnhart1998branch}{vance1993crew}
%\cite{barnhart1998branch} (FAZER APUD)
\cite{vance1993crew} reportou que para uma isntancia de CSP com 253 tarefas, mais de 5 milhões de jornadas
são possíveis. De todas as jornadas possíveis, apenas algumas são de fato utilizadas na solução final, as demais não são interessantes.
Portanto, é interessante que apenas jornadas que podem vir a ser úteis sejam uteis de fato. A programação linear inteira dispõe-se um recurso
capaz de sequencialmente reduzir o número de colunas a serem utilizados: \textbf{geração de colunas}~\cite{desrosiers2005primer}.

\begin{align}
    \label{spp} \text{min} \: \sum_{j \in J} c_j x_j \\
    \label{spp2} \sum_{j \in J} a_{tj} x_j = 1, \forall t \in T \\
    \label{spp3} x_j \in \{0, 1\}, \forall j \in J
\end{align}

\begin{align}
    \label{scp} \text{min} \: \sum_{j \in J} c_j x_j \\
    \label{scp2} \sum_{j \in J} a_{tj} x_j \ge 1, \forall t \in T \\
    \label{scp3} x_j \in \{0, 1\}, \forall j \in J
\end{align}

O método de geração de colunas consiste em um processo onde o problema com um grande número de variáveis é decomposto em
dois problemas. O problema mestre, que é igual ao original, porém, com um conjunto reduzido de variáveis. E o sub-problema,
que é utilizado para identificar quais varíaveis são necessárias para obter-se a solução ótima do problema original. O processo
de solução com geração de colunas consiste em criar-se um problema mestre, otimizar a sua relaxação linear, e utilizar
as varáveis duais do problema mestre juntamente com o sub-problema para indentificar se o problema mestre necessita da geração
de novas colunas ou se ele corresponde ao ótimo do problema original.

Para a geração de colunas, dado o conjunto $J$ de todas as jornadas (que na prática está codificado na matriz $A$),
utiliza-se um conjunto reduzido $\tilde{J} \subseteq J$. O problema mestre é dado por~\eqref{sppm1},~\eqref{sppm2} e~\eqref{sppm3}.
Após a solução da relaxação linear do problema mestre, utiliza-se as variáveis duais em um subproblema para determinar
se alguma jornada pode melhorar o resultado atual. Este processo é denominado de \textit{pricing}. No caso do CSP, pode-se
apresentar o conjunto de tarefas como vértices em um grafo e liga-los com arestas direcionadas para indicar a ordem
que as tarefas podem ser executadas. Toda jornada é então um caminho neste grafo. A tabela~\ref{tab_csp} contém uma
instância de CSP e a figura~\ref{fig_csp} apresenta o grafo associado ao problema.

\begin{align}
    \label{sppm1} \text{min} \: \sum_{j \in \tilde{J}} c_j x_j \\
    \label{sppm2} \sum_{j \in \tilde{J}} a_{tj} x_j = 1, \forall t \in T \\
    \label{sppm3} x_j \in \{0, 1\}, \forall j \in \tilde{J}
\end{align}

\begin{table}[htpb]
    \centering
    \begin{tabular}{|c|c|c|} \hline
        tarefa   & Início & Fim \\ \hline
        tarefa 1 & 1      & 10 \\ \hline
        tarefa 2 & 1      & 4  \\ \hline
        tarefa 3 & 11     & 14 \\ \hline
        tarefa 4 & 6      & 10 \\ \hline
        tarefa 5 & 11     & 15 \\ \hline
    \end{tabular}
    \caption{Instância do CSP}
    \label{tab_csp}
\end{table}

\begin{figure}[htpb]
    \centering
    \includegraphics[width=0.8\linewidth]{graph.pdf}
    \caption{Graph}
    \label{fig:graph}
\end{figure}


Alem do método de geração de colunas, outros métodos também são utilizados na literatura, tais como: algoritmos genéticos~\cite{doalgoritmos},
\textit{multi-start randomized heuristic}~\cite{de2016multi}, \textit{particle swarm optimization}~\cite{limlawan2014hybrid},
\textit{simulated annealing}~\cite{hanafi2014hybrid} e \textit{ant colony optimization}~\cite{deng2011ant}.

Na literatura pesquisada até o momento, identificou-se que vários autores a fim de resolver o CSP de forma eficiente
(que apresentam um melhor desempenho computacional), utilizaram o método de geração de colunas ou um conjunto de outros métodos,
podendo ser heuristicos ou hibridos.

Porém, dada a pesquisa que pode-se realizar, não foi possível concluir que identificou-se um método (híbrido ou heuristico)
que apresenta-se o melhor desempenho computacional dentre todos os métodos que foram propostos. Especialmente considerando
que o CSP apresenta diversas modelagens que variam entre sí, de modo que o bom desempenho para um conjunto de modelos
não transfere-se para outro.

Dado o exposto acima, este trabalho tem o objetivo de especificar e propor um método para a solução do CSP que, a princípio seja capaz de prover
soluções de modo exato e seja competitivo, e preferencialmete mais eficiente, com outros algoritmos pesquisados na literatura.

%Estre trabalho propõe-se a estudar os diferentes métodos presentes na literatura com o objetivo de selecionar um
%método para estudo mais aprofundado. Em seguida, tem-se como objetivo apresentar uma modificação ao mesmo, visando
%um ganho de velocidade do algoritmo. Um dos objetivos deste trabalho é desenvolver um método híbrido, capaz de prover
%soluções exatas e tirar proveito de heuristícas ou meta-heuristícas para prover soluções factiveis mais rapidamente.

%------------------------------------------------
\section{Objetivos}
\label{obj}
Objetivo Geral: Este trabalho tem como objetivo análisar os métodos disponíveis na literatura para solução do CSP com
a finalidade de propor um novo algoritmo ou melhorar um já existente.
\\
Objetivos Específicos:
\begin{itemize}
    %\item ???
    \item Pesquisar e identificar os principais algortimos presentes na literatura que resolvam o CSP.
    \item Coletar instâncias de benchmark utilizadas na literatura.
    \item Selecionar alguns dos algoritmos pesquisados.
    \item Especificar o método proposto.
    \item Realizar testes para avaliação do método proposto.
\end{itemize}


%------------------------------------------------
\section{Metodologia}
\label{met}
Inicialmente estudar-se-á em detalhe o problema proposto e será realizado uma revisão bibliografica do assunto,
incluindo as diversas modelagens para o problema. Em seguida será considerado algoritmos que foram utilizados
na literatura para resolver o problema e será analisado suas caracteristicas funcionais e desempenho, com o objetivo
de elencar 3 algortimos para estudo. Após está etapa será procurado problemas práticos reais de PPT com o objetivo
de realizar um estudo da eficiência dos modelos estudados. Por fim será realizado uma comparação dos resultados
obtidos para averiguar a relevância dos algoritmos estudados e suas implementações.


%------------------------------------------------
\section{Cronograma proposto}
\label{cro}
Estapas:
\begin{enumerate}
        \item Revisão bibliografica e análise da problemática.
        \item Escolha dos métodos de modelagem.
        \item Estudo de algoritmos exatos aplicáveis para a solução da problemática.
        \item Estudo de algoritmos heuristicos aplicáveis para a solução da problemática.
        \item Eleição de algoritmos para estudo.
        \item Desenvolvimento de prototipos para testes.
        \item Experimentação com os algoritmos escolhidos.
        \item Coleta e análise dos experimentos.
        \item Escrita do trabalho de conclusão de curso.
\end{enumerate}

\vspace{0.5cm}
{\tiny
\noindent \begin{tabular}{|c||c|c|c|c|c|c|c|c|c|c|c|c||c|c|c|c|c|c|c|c|c|c|c|c|}
  \hline
  \multirow{2}{*}{\textbf{\small{Etapas}}} & \multicolumn{12}{|c||}{\textbf{\small{2012}}} & \multicolumn{12}{|c|}{\textbf{\small{2013}}} \\
  \cline{2-25}
   & \textbf{J} & \textbf{F} & \textbf{M} & \textbf{A} & \textbf{M} & \textbf{J} & \textbf{J} & \textbf{A} & \textbf{S} & \textbf{O} & \textbf{N} & \textbf{D} & \textbf{J} & \textbf{F} & \textbf{M} & \textbf{A} & \textbf{M} & \textbf{J} & \textbf{J} & \textbf{A} & \textbf{S} & \textbf{O} & \textbf{N} & \textbf{D} \\
  \hline \hline
  \textbf{\small{1}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{2}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{3}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{4}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{5}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{6}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{7}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{8}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{\small{9}} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
  \textbf{$\cdots$} & & & & & & & & & & & & & & & & & & & & & & & & \\
  \hline
\end{tabular}
}


%------------------------------------------------
%\section{Linha e Grupo de Pesquisa}
%$<$Explicitar a linha de pesquisa do TCC, os grupos de pesquisa do DCC envolvidos especificando
%o grupo a qual pertence seu trabalho, \underline{se for o caso}.$>$ Caso o TCC não pertença a um grupo,
%especificar somente as linhas de pesquisa relacionadas.
%O envolvimento com um grupo de pesquisa se dá pela afinidade do orientador ao grupo,
%se o mesmo atua neste grupo em questão e se o professor pesquisa nas linhas de trabalho
%deste grupo. Nada impede que um professor que atue em um grupo possua um tema de TCC fora
%do grupo relacionado. Para que o TCC seja caracterizado dentro de um grupo (se tiver um),
%além de especificar aqui, deve conter a assinatura do líder do grupo para que o mesmo
%esteja ciente da proposta encaminhada.$>$

%------------------------------------------------
\section{Forma de Acompanhamento/Orientação}
O acompanhamento será realizado principalmente através de reuniões semanais. O controle das tarefas a fazer
seram feitas baseadas em uma ata gerada a cada reunião.

%------------------------------------------------

\bibliographystyle{abnt-alf}
\bibliography{tccplanoudesc}

%\begin{thebibliography}{9}

%\bibitem[Gonzalez e Woods 2002]{gonzalez:02}
%GONZALEZ, R. C.; WOODS, R. E. {\it Digital Image Processing}. 2$^{nd}$ ed. New Jersey: Prentice Hall, 2002.

%\bibitem[BERGH et. al. 2013]{Bergh}
%Jorne Van den Bergh, Jeroen Beliën, Philippe De Bruecker, Erik Demeulemeester e Liesje De Boeck \it{Personnel scheduling: A literature review}. European Journal of Operations Research, 2013.


%\end{thebibliography}

%------------------------------------------------

\vskip 1.5cm

\begin{minipage} {0.49\linewidth}
  \centering
  \rule{7.2cm}{0.1mm}

  \textbf{\textit{Omir Alves}}
\end{minipage}
\begin{minipage} {0.49\linewidth}
  \centering
  \rule{7.2cm}{0.1mm}

  \textbf{\textit{Renan Samuel da Silva}}
\end{minipage}

\end{document}
